{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///home/prathmesh/projects/secure-slack/frontend/src/app/components/ChatbotWidget.tsx"],"sourcesContent":["'use client';\nimport React, { useState, useRef, useEffect } from 'react';\n\nconst ChatbotWidget = () => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [messages, setMessages] = useState([\n    { from: 'bot', text: 'Hi! How can I help you today?' }\n  ]);\n  const [input, setInput] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  const bottomRef = useRef<HTMLDivElement>(null);\n\n  const handleSend = async () => {\n    if (input.trim() === '') return;\n  \n    const userMsg = { from: 'user', text: input };\n    setMessages((prev) => [...prev, userMsg]);\n    setInput('');\n    setIsTyping(true);\n  \n    try {\n      const res = await fetch('http://localhost:5000/api/chat/chatbotReply', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ message: input }),\n      });\n  \n      const data = await res.json();\n  \n      setMessages((prev) => [\n        ...prev,\n        { from: 'bot', text: data.reply },\n      ]);\n    } catch (err) {\n      console.log(err);\n      setMessages((prev) => [\n        ...prev,\n        { from: 'bot', text: 'Server error. Please try again later.' },\n      ]);\n    } finally {\n      setIsTyping(false);\n    }\n  };\n  \n  useEffect(() => {\n    bottomRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages, isTyping]);\n\n  return (\n    <>\n      {/* Chatbox UI */}\n      {isOpen && (\n        <div className=\"fixed bottom-24 right-4 w-[90%] sm:w-80 bg-white border border-gray-300 rounded-xl shadow-2xl z-50 flex flex-col overflow-hidden\">\n          {/* Header */}\n          <div className=\"bg-blue-600 text-white px-4 py-3 font-semibold text-base\">\n            ðŸ’¬ Secure Slack Bot\n          </div>\n\n          {/* Messages */}\n          <div className=\"flex flex-col space-y-2 px-3 py-2 h-64 overflow-y-auto bg-gray-50\">\n            {messages.map((msg, idx) => (\n              <div\n                key={idx}\n                className={`text-sm px-4 py-2 rounded-2xl max-w-[75%] shadow ${\n                  msg.from === 'bot'\n                    ? 'bg-white text-gray-800 self-start'\n                    : 'bg-blue-600 text-white self-end'\n                }`}\n              >\n                {msg.text}\n              </div>\n            ))}\n            {isTyping && (\n              <div className=\"text-sm px-4 py-2 rounded-2xl bg-gray-300 text-gray-700 self-start animate-pulse max-w-[60%]\">\n                Typing...\n              </div>\n            )}\n            <div ref={bottomRef} />\n          </div>\n\n          {/* Input Area */}\n          <div className=\"flex items-center px-2 py-2 border-t bg-white\">\n            <input\n              type=\"text\"\n              value={input}\n              onChange={(e) => setInput(e.target.value)}\n              placeholder=\"Type your message...\"\n              className=\"flex-grow px-3 py-2 border border-gray-300 rounded-l-md focus:outline-none text-sm\"\n            />\n            <button\n              onClick={handleSend}\n              className=\"bg-blue-600 text-white px-4 py-2 rounded-r-md hover:bg-blue-700 transition-all text-sm\"\n            >\n              Send\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Floating Button */}\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"fixed bottom-6 right-6 p-4 bg-blue-600 text-white rounded-full shadow-xl z-50 hover:bg-blue-700 transition\"\n      >\n        ðŸ’¬\n      </button>\n    </>\n  );\n};\n\nexport default ChatbotWidget;\n"],"names":[],"mappings":";;;;AACA;AADA;;;AAGA,MAAM,gBAAgB;IACpB,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACrC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;QACvC;YAAE,MAAM;YAAO,MAAM;QAAgC;KACtD;IACD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,YAAY,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAkB;IAEzC,MAAM,aAAa;QACjB,IAAI,MAAM,IAAI,OAAO,IAAI;QAEzB,MAAM,UAAU;YAAE,MAAM;YAAQ,MAAM;QAAM;QAC5C,YAAY,CAAC,OAAS;mBAAI;gBAAM;aAAQ;QACxC,SAAS;QACT,YAAY;QAEZ,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,+CAA+C;gBACrE,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,SAAS;gBAAM;YACxC;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAE3B,YAAY,CAAC,OAAS;uBACjB;oBACH;wBAAE,MAAM;wBAAO,MAAM,KAAK,KAAK;oBAAC;iBACjC;QACH,EAAE,OAAO,KAAK;YACZ,QAAQ,GAAG,CAAC;YACZ,YAAY,CAAC,OAAS;uBACjB;oBACH;wBAAE,MAAM;wBAAO,MAAM;oBAAwC;iBAC9D;QACH,SAAU;YACR,YAAY;QACd;IACF;IAEA,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,UAAU,OAAO,EAAE,eAAe;YAAE,UAAU;QAAS;IACzD,GAAG;QAAC;QAAU;KAAS;IAEvB,qBACE;;YAEG,wBACC,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;kCAA2D;;;;;;kCAK1E,8OAAC;wBAAI,WAAU;;4BACZ,SAAS,GAAG,CAAC,CAAC,KAAK,oBAClB,8OAAC;oCAEC,WAAW,CAAC,iDAAiD,EAC3D,IAAI,IAAI,KAAK,QACT,sCACA,mCACJ;8CAED,IAAI,IAAI;mCAPJ;;;;;4BAUR,0BACC,8OAAC;gCAAI,WAAU;0CAA+F;;;;;;0CAIhH,8OAAC;gCAAI,KAAK;;;;;;;;;;;;kCAIZ,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,MAAK;gCACL,OAAO;gCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gCACxC,aAAY;gCACZ,WAAU;;;;;;0CAEZ,8OAAC;gCACC,SAAS;gCACT,WAAU;0CACX;;;;;;;;;;;;;;;;;;0BAQP,8OAAC;gBACC,SAAS,IAAM,UAAU,CAAC;gBAC1B,WAAU;0BACX;;;;;;;;AAKP;uCAEe","debugId":null}}]
}